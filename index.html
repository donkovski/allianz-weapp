<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Валутен Калкулатор</title>

<style>

body{
font-family: Arial;
background:#f5f7fb;
display:flex;
justify-content:center;
margin-top:40px;
}

.container{
background:white;
padding:25px;
width:320px;
border-radius:10px;
box-shadow:0px 5px 20px rgba(0,0,0,0.1);
}

h2{
text-align:center;
margin-bottom:20px;
color:#003366;
}

.display{
width:100%;
height:50px;
font-size:22px;
text-align:right;
padding:10px;
border:1px solid #ccc;
border-radius:6px;
margin-bottom:15px;
}

select{
width:100%;
padding:10px;
margin-bottom:10px;
border-radius:6px;
border:1px solid #ccc;
font-size:16px;
}

.result{
margin-top:10px;
font-size:20px;
text-align:center;
color:#003366;
font-weight:bold;
}

.buttons{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:8px;
margin-top:15px;
}

button{
padding:15px;
font-size:18px;
border:none;
border-radius:6px;
background:#e6ecf5;
cursor:pointer;
}

button:hover{
background:#ccd6e6;
}

.convert{
margin-top:10px;
width:100%;
padding:12px;
font-size:18px;
background:#003366;
color:white;
border-radius:6px;
}

.convert:hover{
background:#0055aa;
}

</style>
</head>

<body>

<div class="container">

<h2>Валутен Калкулатор</h2>

<input class="display" id="amount" value="0">

<select id="from"></select>

<select id="to"></select>

<button class="convert" onclick="convert()">Конвертирай</button>

<div class="result" id="result">0</div>

<div class="buttons">

<button onclick="addNumber(7)">7</button>
<button onclick="addNumber(8)">8</button>
<button onclick="addNumber(9)">9</button>
<button onclick="clearDisplay()">C</button>

<button onclick="addNumber(4)">4</button>
<button onclick="addNumber(5)">5</button>
<button onclick="addNumber(6)">6</button>
<button onclick="addDot()">.</button>

<button onclick="addNumber(1)">1</button>
<button onclick="addNumber(2)">2</button>
<button onclick="addNumber(3)">3</button>
<button onclick="backspace()">←</button>

<button onclick="addNumber(0)">0</button>

</div>

</div>

<script>

let rates={}

async function loadCurrencies(){

let res = await fetch("https://api.exchangerate-api.com/v4/latest/EUR")

let data = await res.json()

rates=data.rates

let from=document.getElementById("from")
let to=document.getElementById("to")

for(let currency in rates){

let option1=document.createElement("option")
option1.value=currency
option1.text=currency
from.appendChild(option1)

let option2=document.createElement("option")
option2.value=currency
option2.text=currency
to.appendChild(option2)

}

from.value="EUR"
to.value="USD"

}

loadCurrencies()


function addNumber(num){

let display=document.getElementById("amount")

if(display.value=="0")
display.value=num
else
display.value+=num

}

function addDot(){

let display=document.getElementById("amount")

if(!display.value.includes("."))
display.value+="."

}

function clearDisplay(){
document.getElementById("amount").value="0"
}

function backspace(){

let display=document.getElementById("amount")

display.value=display.value.slice(0,-1)

if(display.value=="")
display.value="0"

}

function convert(){

let amount=parseFloat(document.getElementById("amount").value)

let from=document.getElementById("from").value
let to=document.getElementById("to").value

let result=(amount/rates[from])*rates[to]

document.getElementById("result").innerHTML=
amount+" "+from+" = "+result.toFixed(2)+" "+to

}

</script>

</body>
</html>
